[{"content":"Desvendando as Fun√ß√µes no SQL Server: Poder e Boas Pr√°ticas! Ol√°, pessoal! Hoje vamos mergulhar no mundo das fun√ß√µes no SQL Server. Elas s√£o ferramentas incrivelmente poderosas para encapsular l√≥gica e reutilizar c√≥digo, mas, como tudo no SQL, exigem aten√ß√£o para n√£o virarem um gargalo de performance.\nO que s√£o Fun√ß√µes no SQL Server? Uma fun√ß√£o no SQL Server √© um objeto de banco de dados que aceita par√¢metros de entrada, executa um conjunto de a√ß√µes (como consultas, c√°lculos, etc.) e retorna um √∫nico valor (escalar) ou uma tabela. Elas s√£o similares a procedimentos armazenados, mas com uma diferen√ßa crucial: fun√ß√µes podem ser usadas dentro de instru√ß√µes SELECT, WHERE, HAVING, e at√© mesmo dentro de outras fun√ß√µes, o que as torna extremamente vers√°teis.\nExistem dois tipos principais de fun√ß√µes que podemos criar:\nFun√ß√µes Escalares (Scalar-valued Functions - T-SQL): Retornam um √∫nico valor de qualquer tipo de dado. Fun√ß√µes com Valor de Tabela (Table-valued Functions - TVFs): Retornam uma tabela. Podem ser de duas formas: Inline Table-valued Functions (iTVFs): S√£o mais simples e perform√°ticas, pois essencialmente expandem a l√≥gica da fun√ß√£o diretamente na consulta chamadora, como uma view parametrizada. Multi-statement Table-valued Functions (mTVFs): Permitem l√≥gica mais complexa, incluindo m√∫ltiplos comandos T-SQL, mas podem ter um impacto significativo na performance devido a otimiza√ß√µes menos agressivas e, muitas vezes, a necessidade de materializa√ß√£o de dados. Por Que Usar Fun√ß√µes? Reutiliza√ß√£o de C√≥digo: Escreva a l√≥gica uma vez e use-a em v√°rios lugares. Modulariza√ß√£o: Quebre problemas complexos em partes menores e mais gerenci√°veis. Consist√™ncia: Garanta que uma l√≥gica de neg√≥cio espec√≠fica seja aplicada da mesma forma em todo o banco de dados. Manuten√ß√£o Simplificada: Altera√ß√µes na l√≥gica precisam ser feitas em apenas um lugar. Criando Fun√ß√µes: Exemplos e Boas Pr√°ticas Vamos a alguns exemplos e, mais importante, √†s boas pr√°ticas!\n1. Fun√ß√£o Escalar Simples Imagine que voc√™ precisa calcular o valor total de um imposto sobre um pre√ßo.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 CREATE FUNCTION dbo.CalcularImposto (@Preco DECIMAL(18, 2), @PercentualImposto DECIMAL(5, 2)) RETURNS DECIMAL(18, 2) AS BEGIN RETURN @Preco * (@PercentualImposto / 100); END; GO -- Exemplo de uso SELECT Produto, PrecoUnitario, dbo.CalcularImposto(PrecoUnitario, 10.00) AS ValorImposto, PrecoUnitario + dbo.CalcularImposto(PrecoUnitario, 10.00) AS PrecoTotal FROM MinhaTabelaDeProdutos; Dica de Performance: Fun√ß√µes escalares, especialmente as que realizam opera√ß√µes complexas ou acessam dados, podem levar a problemas de performance se chamadas para cada linha em grandes conjuntos de resultados (o temido RBAR - Row By Agonizing Row). Pense se a l√≥gica n√£o poderia ser resolvida diretamente na sua consulta principal ou se uma iTVF seria mais adequada.\n2. Fun√ß√£o com Valor de Tabela (Inline TVF) Se voc√™ precisa retornar um conjunto de resultados baseado em par√¢metros, as iTVFs s√£o suas melhores amigas para performance. Elas s√£o tratadas pelo otimizador de consultas de forma muito eficiente.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 CREATE FUNCTION dbo.ObterProdutosPorCategoria (@Categoria NVARCHAR(50)) RETURNS TABLE AS RETURN ( SELECT ProdutoID, NomeProduto, Preco FROM Produtos WHERE Categoria = @Categoria ); GO -- Exemplo de uso SELECT p.ProdutoID, p.NomeProduto, p.Preco FROM dbo.ObterProdutosPorCategoria(\u0026#39;Eletr√¥nicos\u0026#39;) AS p WHERE p.Preco \u0026gt; 500; Por que iTVF √© melhor que mTVF na maioria dos casos? O otimizador de consultas pode \u0026ldquo;inliner\u0026rdquo; (expandir) a l√≥gica da iTVF diretamente na consulta chamadora, permitindo otimiza√ß√µes mais abrangentes e uso eficaz de √≠ndices. mTVFs, por outro lado, muitas vezes materializam seus resultados em um worktable, o que pode impedir boas otimiza√ß√µes.\n3. Fun√ß√£o com Valor de Tabela (Multi-statement TVF) - Cuidado! Embora √∫teis para l√≥gica complexa que envolve m√∫ltiplas etapas ou vari√°veis, as mTVFs devem ser usadas com cautela devido ao seu potencial impacto na performance.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 -- CUIDADO: Este √© um exemplo de mTVF, geralmente evite se uma iTVF for poss√≠vel. CREATE FUNCTION dbo.ObterRelatorioVendasMensal (@Ano INT, @Mes INT) RETURNS @Relatorio TABLE ( ProdutoID INT, NomeProduto NVARCHAR(255), TotalVendas DECIMAL(18, 2), MediaVendasDiaria DECIMAL(18, 2) ) AS BEGIN INSERT INTO @Relatorio (ProdutoID, NomeProduto, TotalVendas) SELECT p.ProdutoID, p.NomeProduto, SUM(iv.Quantidade * iv.PrecoUnitario) FROM Produtos p INNER JOIN ItensVenda iv ON p.ProdutoID = iv.ProdutoID INNER JOIN Vendas v ON iv.VendaID = v.VendaID WHERE YEAR(v.DataVenda) = @Ano AND MONTH(v.DataVenda) = @Mes GROUP BY p.ProdutoID, p.NomeProduto; UPDATE @Relatorio SET MediaVendasDiaria = TotalVendas / DAY(EOMONTH(CAST(CAST(@Ano AS VARCHAR) + \u0026#39;-\u0026#39; + CAST(@Mes AS VARCHAR) + \u0026#39;-01\u0026#39; AS DATE))); RETURN; END; GO -- Exemplo de uso SELECT * FROM dbo.ObterRelatorioVendasMensal(2023, 7); Quando usar mTVF? Somente quando a l√≥gica √© realmente complexa e n√£o pode ser expressa de forma concisa em uma iTVF, e ap√≥s considerar outras alternativas como views, CTEs ou procedures que retornam resultados.\nBoas Pr√°ticas Essenciais Evite Fun√ß√µes Escalares em Colunas de Grandes Tabelas em Cl√°usulas WHERE ou JOIN: Isso impede o uso de √≠ndices e for√ßa um scan na tabela. Por exemplo, WHERE dbo.MinhaFuncao(Coluna) = 'Valor' √© uma receita para problemas de performance. Prefira iTVFs a mTVFs: Sempre que poss√≠vel, estruture sua l√≥gica para se encaixar em uma Inline Table-valued Function para aproveitar as otimiza√ß√µes do SQL Server. Mantenha a L√≥gica Simples: Fun√ß√µes complexas demais podem se tornar dif√≠ceis de depurar e manter, al√©m de potenciais problemas de performance. Use Schemas Adequados: Sempre prefixe suas fun√ß√µes com o schema apropriado (e.g., dbo.MinhaFuncao). Entenda o Impacto na Otimiza√ß√£o: Fun√ß√µes podem \u0026ldquo;esconder\u0026rdquo; a inten√ß√£o do otimizador de consultas, levando a planos de execu√ß√£o sub√≥timos. Use SET STATISTICS IO ON e SET STATISTICS TIME ON, e analise o plano de execu√ß√£o para entender o que est√° acontecendo. Teste, Teste, Teste!: Teste suas fun√ß√µes com diferentes volumes de dados e cen√°rios para garantir que elas performem bem e retornem os resultados esperados. As fun√ß√µes s√£o uma parte fundamental do arsenal de qualquer desenvolvedor SQL Server. Usadas corretamente, elas podem aumentar drasticamente a efici√™ncia e a manutenibilidade do seu c√≥digo. Mas lembre-se: com grande poder v√™m grandes responsabilidades de otimiza√ß√£o!\nVoc√™ j√° teve algum desafio interessante com fun√ß√µes no SQL Server? Compartilhe sua experi√™ncia nos coment√°rios!\n","date":"2025-07-27T21:43:58-03:00","permalink":"https://henriquecof.github.io/p/funcoes-sql-server/","title":"Funcoes SQL Server"},{"content":"Ol√°, pessoal! Como um velho amigo do SQL Server, sei que muitas vezes nos deparamos com a necessidade de integrar dados que residem em servidores diferentes. √â a√≠ que o Linked Server entra em cena, atuando como uma ponte robusta entre ambientes de dados distintos. Neste post, vamos mergulhar fundo no universo dos Linked Servers, desde sua configura√ß√£o b√°sica at√© dicas avan√ßadas e solu√ß√£o de problemas. Prepare-se para desvendar todo o potencial dessa ferramenta!\nO Que √© um Linked Server e Por Que Voc√™ Precisa Dele? Imagine que voc√™ tem dados de vendas em um servidor e informa√ß√µes de clientes em outro. Ou talvez seu sistema principal esteja em um SQL Server mais antigo, mas voc√™ precisa puxar dados de um sistema financeiro que roda em uma inst√¢ncia mais recente, ou at√© mesmo em um Oracle, DB2 ou MySQL. O Linked Server √© exatamente o que voc√™ precisa!\nEm termos simples, um Linked Server √© uma configura√ß√£o no SQL Server que permite que uma inst√¢ncia do SQL Server execute comandos em outra fonte de dados OLE DB. Essa fonte de dados pode ser outra inst√¢ncia do SQL Server (local ou remota), um Oracle, um MySQL, um DB2, e at√© mesmo um arquivo Excel ou CSV (sim, voc√™ leu certo!). Ele atua como um \u0026ldquo;atalho\u0026rdquo; para dados externos, tornando poss√≠vel realizar consultas, atualiza√ß√µes e at√© mesmo criar objetos em servidores remotos, tudo a partir da sua inst√¢ncia local.\nMas por que usar um Linked Server? As raz√µes s√£o in√∫meras:\nIntegra√ß√£o de Dados: Unificar dados de diferentes fontes para relat√≥rios, an√°lises ou migra√ß√µes. Consultas Distribu√≠das: Executar queries que abrangem m√∫ltiplos servidores sem a necessidade de transferir dados. Processos de ETL (Extract, Transform, Load): Facilitar a extra√ß√£o e carga de dados entre sistemas. Gerenciamento Centralizado: Acessar dados de diferentes ambientes a partir de uma √∫nica interface. Minimizar o Tr√°fego de Rede: Em alguns cen√°rios, pode ser mais eficiente consultar os dados no servidor de origem do que transferir grandes volumes. M√£os √† Obra: Configurando um Linked Server A configura√ß√£o de um Linked Server pode parecer um bicho de sete cabe√ßas √† primeira vista, mas garanto que √© mais simples do que parece. Vamos ver o passo a passo, tanto via SQL Server Management Studio (SSMS) quanto via T-SQL.\nVia SQL Server Management Studio (SSMS) Esta √© a forma mais visual e intuitiva para quem est√° come√ßando:\nConecte-se ao SSMS: Abra o SQL Server Management Studio e conecte-se √† inst√¢ncia onde voc√™ deseja criar o Linked Server. Navegue at√© \u0026ldquo;Server Objects\u0026rdquo;: No Object Explorer, expanda \u0026ldquo;Server Objects\u0026rdquo;. Expanda \u0026ldquo;Linked Servers\u0026rdquo;: Dentro de \u0026ldquo;Server Objects\u0026rdquo;, expanda \u0026ldquo;Linked Servers\u0026rdquo;. Novo Linked Server: Clique com o bot√£o direito em \u0026ldquo;Linked Servers\u0026rdquo; e selecione \u0026ldquo;New Linked Server\u0026hellip;\u0026rdquo;. Preencha as Informa√ß√µes: Uma nova janela \u0026ldquo;New Linked Server\u0026rdquo; ser√° aberta. Aqui √© onde a m√°gica acontece. General Page: Linked server: D√™ um nome significativo ao seu Linked Server. Este ser√° o nome que voc√™ usar√° nas suas consultas (ex: MEU_SERVER_REMOTO). Server type: SQL Server: Se voc√™ est√° se conectando a outra inst√¢ncia do SQL Server, selecione esta op√ß√£o. Other data source: Para outras fontes de dados (Oracle, MySQL, Excel, etc.), selecione esta e escolha o provedor OLE DB apropriado. Para SQL Server, esta op√ß√£o √© mais gen√©rica e permite especificar o provedor e a string de conex√£o manualmente. Product name: Para SQL Server, geralmente preenchemos com \u0026ldquo;SQL Server\u0026rdquo;. Para outros, o nome do produto (ex: \u0026ldquo;Oracle\u0026rdquo;). Data source: O nome ou endere√ßo IP do servidor remoto. Se for uma inst√¢ncia nomeada (ex: SEUSQL\\INSTANCIA), use SEUSQL\\INSTANCIA. Provider string: Deixe em branco se for SQL Server padr√£o. Para outros provedores, pode ser necess√°rio especificar par√¢metros de conex√£o adicionais. Catalog: O nome do banco de dados padr√£o no servidor remoto para este Linked Server. Opcional, mas √∫til. Security Page: Esta √© crucial para a autentica√ß√£o. Not be made: Sem contexto de seguran√ßa. N√£o recomendado para a maioria dos cen√°rios. Be made using the login\u0026rsquo;s current security context: A autentica√ß√£o √© feita usando as credenciais do usu√°rio que est√° executando a consulta no servidor local. √ötil em ambientes de dom√≠nio com autentica√ß√£o Windows integrada. Be made using a security context that the login\u0026rsquo;s current security context does not support: Para usu√°rios que n√£o s√£o mapeados. Be made using this security context: Esta √© a op√ß√£o mais comum e flex√≠vel. Voc√™ especifica um login remoto (usu√°rio e senha) que ser√° usado para acessar o servidor vinculado. Remote login: O nome de usu√°rio no servidor remoto. With password: A senha para o usu√°rio remoto. Add: Mapear logins espec√≠ficos do servidor local para logins espec√≠ficos do servidor remoto. Muito √∫til para granularidade de seguran√ßa. Server Options Page: Collation Compatible: Se os servidores tiverem diferentes configura√ß√µes de collation e voc√™ precisa que o Linked Server trate isso. Data Access: Habilita ou desabilita o acesso a dados. RPC, RPC Out: Permite chamadas de procedimento remoto. Essencial para executar stored procedures remotas. Use Remote Collation: Usa a collation do servidor remoto. Clique em OK: Seu Linked Server est√° pronto! Via T-SQL (Transact-SQL) Para quem prefere a automa√ß√£o e o controle total, o T-SQL √© o caminho. A sintaxe b√°sica √© a seguinte:\n1 2 3 4 5 6 7 8 9 10 11 12 EXEC sp_addlinkedserver @server = \u0026#39;MEU_SERVER_REMOTO\u0026#39;, -- Nome do Linked Server @srvproduct = \u0026#39;SQL Server\u0026#39;, -- Produto do servidor remoto (ex: \u0026#39;SQL Server\u0026#39;, \u0026#39;Oracle\u0026#39;) @provider = \u0026#39;SQLNCLI11\u0026#39;, -- Provedor OLE DB (SQLNCLI11 para SQL Server 2012 e superior, SQLOLEDB para vers√µes mais antigas) @datasrc = \u0026#39;NOME_OU_IP_DO_SERVER_REMOTO\\INSTANCIA_REMOTO\u0026#39;; -- Fonte de dados (nome do servidor ou IP, com inst√¢ncia se aplic√°vel) EXEC sp_addlinkedsrvlogin @rmtsrvname = \u0026#39;MEU_SERVER_REMOTO\u0026#39;, -- Nome do Linked Server @useself = \u0026#39;FALSE\u0026#39;, -- \u0026#39;TRUE\u0026#39; para usar contexto de seguran√ßa atual, \u0026#39;FALSE\u0026#39; para especificar login @locallogin = NULL, -- Login local (NULL para todos os logins locais) @rmtuser = \u0026#39;usuario_remoto\u0026#39;, -- Login remoto @rmtpassword = \u0026#39;sua_senha_secreta\u0026#39;; -- Senha do login remoto Observa√ß√µes importantes:\n@provider: Para SQL Server, SQLNCLI11 √© o provedor recomendado para SQL Server 2012 e vers√µes posteriores. Para vers√µes mais antigas (at√© SQL Server 2008 R2), SQLOLEDB era o padr√£o. Certifique-se de ter o provedor instalado e registrado. @locallogin: Se voc√™ deseja que apenas um login espec√≠fico no seu servidor local possa usar esse Linked Server, substitua NULL pelo nome do login local. Caso contr√°rio, NULL permite que qualquer login local use o mapeamento. sp_addlinkedsrvlogin: Voc√™ pode usar sp_addlinkedsrvlogin m√∫ltiplas vezes para mapear diferentes logins locais para diferentes logins remotos, ou para mapear logins locais para o contexto de seguran√ßa atual (@useself = 'TRUE'). Testando e Usando Seu Linked Server Depois de configurar, √© hora de testar!\nConsultando Dados A forma mais comum de usar um Linked Server √© atrav√©s de consultas de quatro partes:\n1 2 3 4 5 6 7 SELECT * FROM MEU_SERVER_REMOTO.NomeDoBancoDeDados.NomeDoSchema.NomeDaTabela; -- Exemplo real: SELECT c.NomeCliente, p.NomeProduto FROM MEU_SERVER_REMOTO.VendasDB.dbo.Clientes c INNER JOIN SEGUNDO_SERVER.EstoqueDB.dbo.Produtos p ON c.ProdutoID = p.ProdutoID; Voc√™ tamb√©m pode usar a fun√ß√£o OPENQUERY para consultas mais complexas ou para otimizar o desempenho, pois ela envia a consulta diretamente para o servidor remoto para ser executada l√°, e n√£o no servidor local.\n1 2 SELECT * FROM OPENQUERY(MEU_SERVER_REMOTO, \u0026#39;SELECT ClienteID, NomeCliente FROM VendasDB.dbo.Clientes WHERE DataRegistro \u0026gt; GETDATE() - 30\u0026#39;); A fun√ß√£o OPENDATASOURCE √© similar, mas permite especificar a fonte de dados ad-hoc, sem a necessidade de um Linked Server pr√©-configurado. Use com cautela, pois ela √© menos segura e mais verbosa.\n1 2 3 SELECT * FROM OPENDATASOURCE(\u0026#39;SQLNCLI11\u0026#39;, \u0026#39;Data Source=NOME_OU_IP_DO_SERVER_REMOTO\\INSTANCIA_REMOTO;Initial Catalog=VendasDB;User ID=usuario_remoto;Password=sua_senha_secreta\u0026#39;) .VendasDB.dbo.Clientes; Executando Stored Procedures Remotas Sim, voc√™ pode! Isso √© incrivelmente √∫til para orquestrar processos em diferentes servidores.\n1 EXEC MEU_SERVER_REMOTO.NomeDoBancoDeDados.dbo.MinhaStoredProcedureRemota @Parametro1 = \u0026#39;Valor\u0026#39;; Gerenciando e Solucionando Problemas Comuns Mesmo os especialistas em SQL Server enfrentam desafios com Linked Servers. Aqui est√£o alguns pontos importantes e dicas de troubleshooting:\nSeguran√ßa A seguran√ßa √© primordial.\nPrinc√≠pio do M√≠nimo Privil√©gio: Conceda apenas as permiss√µes necess√°rias ao login remoto. N√£o use sa ou contas com privil√©gios excessivos. Autentica√ß√£o Windows vs. SQL Server: A autentica√ß√£o Windows √© mais segura, especialmente em ambientes de dom√≠nio. Se usar autentica√ß√£o SQL Server, garanta senhas fortes e rota√ß√£o regular. Mapeamento de Logins: Use sp_addlinkedsrvlogin para mapear logins locais para logins remotos espec√≠ficos, aumentando a granularidade de seguran√ßa. Desempenho Consultas em Linked Servers podem ser mais lentas devido √† lat√™ncia de rede e ao otimizador de consultas.\nOPENQUERY: Sempre que poss√≠vel, use OPENQUERY. Ele \u0026ldquo;empurra\u0026rdquo; a consulta para o servidor remoto, minimizando o tr√°fego de rede e aproveitando o otimizador de consultas do servidor de origem. √çndices: Certifique-se de que as tabelas no servidor remoto que voc√™ est√° consultando tenham √≠ndices apropriados. Consultas Simples: Evite consultas complexas ou JOINs massivos entre servidores, se puder. Puxe apenas os dados necess√°rios. Transfer√™ncia de Dados: Para grandes volumes de dados, considere a replica√ß√£o, SSIS ou outras ferramentas de ETL em vez de consultas diretas com Linked Server. Troubleshooting Comum \u0026ldquo;Login failed for user\u0026hellip;\u0026rdquo;: O erro mais comum. Verifique o nome de usu√°rio e a senha configurados no sp_addlinkedsrvlogin (ou na aba Security do SSMS). Certifique-se de que o usu√°rio remoto tenha permiss√£o para acessar o banco de dados e as tabelas necess√°rias. \u0026ldquo;OLE DB provider \u0026lsquo;SQLNCLI11\u0026rsquo; for linked server \u0026lsquo;\u0026hellip;\u0026rsquo; returned message \u0026lsquo;No process is on the other end of the pipe.\u0026rsquo;\u0026rdquo;: Geralmente indica um problema de conectividade de rede (firewall bloqueando porta 1433), o servi√ßo do SQL Server no servidor remoto est√° parado, ou o nome do servidor/inst√¢ncia est√° incorreto. \u0026ldquo;The OLE DB provider \u0026lsquo;SQLNCLI11\u0026rsquo; for linked server \u0026lsquo;\u0026hellip;\u0026rsquo; reported an error. Access denied.\u0026rdquo;: O usu√°rio remoto tem acesso ao servidor, mas n√£o tem permiss√£o para a a√ß√£o espec√≠fica (SELECT, INSERT, UPDATE, DELETE) na tabela/view que voc√™ est√° tentando acessar. \u0026ldquo;Cannot initialize the data source object of OLE DB provider \u0026lsquo;\u0026hellip;\u0026rsquo; for linked server \u0026lsquo;\u0026hellip;\u0026rsquo;\u0026rdquo;: Problema com o provedor OLE DB. Ele pode n√£o estar instalado, registrado corretamente, ou a string de conex√£o est√° incorreta. Timeout Errors: Consultas que demoram muito para responder podem ser interrompidas por timeouts. Ajuste as configura√ß√µes de timeout do Linked Server nas op√ß√µes do servidor (Server Options -\u0026gt; Connection Timeout, Query Timeout) ou via sp_serveroption. Excluindo um Linked Server Se voc√™ precisar remover um Linked Server:\n1 EXEC sp_dropserver \u0026#39;MEU_SERVER_REMOTO\u0026#39;, \u0026#39;droplogins\u0026#39;; O argumento 'droplogins' garante que os mapeamentos de login associados tamb√©m sejam removidos.\nConsidera√ß√µes Finais e Pr√≥ximos Passos O Linked Server √© uma ferramenta incrivelmente poderosa e vers√°til no arsenal de qualquer DBA ou desenvolvedor SQL Server. Com ele, voc√™ pode criar solu√ß√µes robustas para integra√ß√£o de dados, consolidar informa√ß√µes e otimizar processos de neg√≥cios.\nNo entanto, como qualquer ferramenta poderosa, o Linked Server requer compreens√£o e bom senso. N√£o o use para tudo! Avalie sempre as necessidades do seu projeto:\nPara consultas ad-hoc r√°pidas entre servidores: O Linked Server √© perfeito. Para integra√ß√£o de dados em larga escala ou processos de ETL complexos: Considere ferramentas como SQL Server Integration Services (SSIS), Azure Data Factory, ou outras solu√ß√µes de orquestra√ß√£o de dados. Para manter c√≥pias de dados sincronizadas: A Replica√ß√£o do SQL Server ou Always On Availability Groups podem ser mais apropriadas. Espero que este guia detalhado tenha desmistificado o Linked Server para voc√™. Ele √© um excelente recurso para conectar mundos de dados e expandir as capacidades do seu ambiente SQL Server.\nSe voc√™ tiver alguma d√∫vida, sugest√£o ou quiser compartilhar suas experi√™ncias com Linked Servers, deixe um coment√°rio abaixo! Adoraria saber como voc√™s est√£o usando essa ferramenta em seus projetos.\nAt√© a pr√≥xima, e bons c√≥digos!\n","date":"2025-07-27T11:16:51-03:00","permalink":"https://henriquecof.github.io/p/linked-server/","title":"Linked Server"},{"content":"Configura√ß√£o de Logins no SQL Server Introdu√ß√£o A configura√ß√£o de logins no SQL Server √© uma das tarefas essenciais para garantir que o acesso ao banco de dados seja controlado adequadamente. Existem dois tipos principais de logins no SQL Server: logins do SQL Server e logins do Windows. Neste post, vamos explorar como configurar ambos os tipos de logins e discutir pr√°ticas recomendadas para gerenciar o acesso de usu√°rios.\n1. Criando Logins no SQL Server No SQL Server, voc√™ pode criar logins atrav√©s do Management Studio ou via T-SQL. Vamos come√ßar com um exemplo b√°sico de como criar um login de SQL Server:\n1 CREATE LOGIN NovoUsuario WITH PASSWORD = \u0026#39;SenhaSegura123\u0026#39;; Este comando cria um login com o nome NovoUsuario e uma senha associada. Ap√≥s a cria√ß√£o, voc√™ precisa conceder permiss√µes para esse login. Isso √© feito associando-o a uma conta de usu√°rio dentro de um banco de dados espec√≠fico.\nExemplo de cria√ß√£o de login com configura√ß√£o de senha expirada: 1 2 3 4 CREATE LOGIN NovoUsuario WITH PASSWORD = \u0026#39;SenhaSegura123\u0026#39;, CHECK_POLICY = ON, CHECK_EXPIRATION = ON; Neste exemplo, a pol√≠tica de senha e a expira√ß√£o de senha s√£o habilitadas, for√ßando o usu√°rio a alterar a senha ap√≥s o prazo determinado.\n2. Criando Logins do Windows Voc√™ tamb√©m pode criar logins baseados no Windows, permitindo que os usu√°rios acessem o banco de dados utilizando suas credenciais do sistema operacional:\n1 CREATE LOGIN [DOMINIO\\Usuario] FROM WINDOWS; Neste caso, o login √© criado utilizando a conta do Windows DOMINIO\\Usuario.\nLogins do Windows vs SQL Server Logins do SQL Server: S√£o √∫teis em cen√°rios onde os usu√°rios n√£o fazem parte de um dom√≠nio ou quando voc√™ precisa de autentica√ß√£o exclusiva no SQL Server. Logins do Windows: S√£o recomendados quando a seguran√ßa do dom√≠nio e a administra√ß√£o de contas de usu√°rios j√° est√£o sendo feitas no n√≠vel do sistema operacional. 3. Associando Logins aos Bancos de Dados Depois de criar o login, o pr√≥ximo passo √© associ√°-lo a um banco de dados. Isso √© feito criando um usu√°rio no banco de dados para o login:\n1 2 USE MeuBancoDeDados; CREATE USER NovoUsuario FOR LOGIN NovoUsuario; O comando acima cria um usu√°rio no banco de dados MeuBancoDeDados associado ao login NovoUsuario.\nExemplo de associa√ß√£o de login do Windows: 1 2 USE MeuBancoDeDados; CREATE USER [DOMINIO\\Usuario] FOR LOGIN [DOMINIO\\Usuario]; 4. Concedendo Permiss√µes Ap√≥s associar o login ao banco de dados, voc√™ deve conceder as permiss√µes necess√°rias. Por exemplo, para conceder permiss√µes de leitura e grava√ß√£o:\n1 GRANT SELECT, INSERT, UPDATE, DELETE ON SCHEMA::dbo TO NovoUsuario; Isso permite que o usu√°rio NovoUsuario tenha permiss√µes de leitura e escrita em todas as tabelas dentro do esquema dbo.\nExemplo de concess√£o de permiss√µes a logins de Windows: 1 GRANT EXECUTE ON SCHEMA::dbo TO [DOMINIO\\Usuario]; Neste caso, o login do Windows [DOMINIO\\Usuario] recebe permiss√£o para executar stored procedures no esquema dbo.\n5. Considera√ß√µes de Seguran√ßa Senhas fortes: Sempre utilize senhas fortes para logins do SQL Server. Senhas fracas s√£o um dos principais vetores de ataque. Privil√©gios m√≠nimos: Evite usar logins com permiss√µes administrativas, a menos que absolutamente necess√°rio. Utilize o princ√≠pio do \u0026ldquo;menor privil√©gio\u0026rdquo;. Logins do Windows: Sempre que poss√≠vel, use logins do Windows, pois eles aproveitam a seguran√ßa e os controles de autentica√ß√£o do sistema operacional. Auditoria: √â importante configurar auditoria de seguran√ßa para monitorar atividades de logins, como tentativas de login falhas e logins com privil√©gios elevados. Conclus√£o A configura√ß√£o de logins no SQL Server √© uma tarefa fundamental para garantir a seguran√ßa e o controle de acesso aos dados. Ao criar logins adequados e aplicar as melhores pr√°ticas de seguran√ßa, como senhas fortes e permiss√µes m√≠nimas, voc√™ estar√° protegendo seu ambiente de banco de dados contra acessos n√£o autorizados. Al√©m disso, √© importante revisar regularmente as permiss√µes e garantir que os logins sejam mantidos atualizados e em conformidade com as pol√≠ticas de seguran√ßa da organiza√ß√£o.\n","date":"2025-07-26T22:49:15-03:00","image":"https://henriquecof.github.io/p/logins-sql-server/1_hu_7a63d7ea16516fb7.jpg","permalink":"https://henriquecof.github.io/p/logins-sql-server/","title":"Logins SQL Server"},{"content":"üöÄ Novidades do Power BI ‚Äì Julho 2025 üÜï Principais Destaques Integra√ß√£o aprimorada com Microsoft 365 Facilita a colabora√ß√£o e uso de recursos empresariais. Copilot mais inteligente Gera√ß√£o de insights automatizados e contextualizados. Compatibilidade com Power BI Report Server e SQL Server 2025 Melhora a distribui√ß√£o de relat√≥rios on-premises. üõ†Ô∏è Atualiza√ß√µes T√©cnicas ‚Äì Power BI Desktop Vers√£o atual: 2.144.1378.0\nData de lan√ßamento: 3 de julho de 2025\nüîß Junho 2025 QFE 3 Corrigido erro ao atualizar tabelas com model.abf desatualizado. Mensagem de erro do Copilot aprimorada para indicar regi√£o n√£o suportada. üîß Junho 2025 QFE 1 Corre√ß√£o na valida√ß√£o de atualiza√ß√£o incremental com m√∫ltiplas fontes. Ajustes na interface de alto contraste no di√°logo \u0026ldquo;Manage Relationships\u0026rdquo;. Corre√ß√£o na formata√ß√£o condicional que removia cores por engano. üìπ V√≠deo Oficial Assista ao v√≠deo com as principais novidades no canal oficial do Power BI:\n‚û°Ô∏è Power BI Update ‚Äì July 2025 Feature Summary\nüìå Resumo R√°pido Categoria Atualiza√ß√£o Microsoft 365 Integra√ß√£o aprimorada Copilot Mais inteligente e contextual Report Server Suporte a PBIRS e SQL Server 2025 Corre√ß√µes Estabilidade em refresh, interface e visualiza√ß√µes Vers√£o atual 2.144.1378.0 ‚Äì 03/07/2025 üì• Atualiza√ß√£o Recomend√°vel A vers√£o de julho √© a mais recente e recomendada.\nüëâ Clique aqui para baixar o Power BI Desktop\nMais detalhes est√£o dispon√≠veis no registro completo de altera√ß√µes.\nFonte: Power BI Desktop ‚Äì Latest Update\n","date":"2025-07-25T21:43:03-03:00","permalink":"https://henriquecof.github.io/p/novidadespowerbijulho2025/","title":"NovidadesPowerBiJulho2025"}]